# Rime schema
# encoding: utf-8

schema:
  schema_id: jyutsp_mobile
  name: Á≤µÈõôÊãº_mobile
  version: "20200305"
  author: 
    - sgal <ayaka@mail.shn.hk>
    - LeiMaau <leimaau@qq.com>
    - chaaklau <chaakming@gmail.com>
    - laubonghaudoi <laubonghaudoi@icloud.com>
    - Over-There-Is <1918301767@qq.com>
    - MrCorn0-0 <gary.deng@qq.com>

  description: |
    Âü∫Êñº„Äåjyut6ping3„ÄçËÅ≤Ë™øÁ≤µÊãºË©ûÂ∫´„ÄÅÈáçË¶ÅÂèÉËÄÉ„Äåsoengping„ÄçÁöÑÁ≤µË™ûÈõôÊãºËº∏ÂÖ•ÊñπÊ°à„ÄÇ
    Êú¨ÊñπÊ°àÈÅ©ÂêàÂú®ÁßªÂãïÁ´Ø‰ΩøÁî®„ÄÇÂÖ©ÈçµÂÖßËº∏ÂÖ•Êº¢Â≠óÔºåÈôÑÂä†Á∑®Á¢º„ÄåÔºõ„ÄçÂèØ‰ª•ÂØ¶ÁèæÁ≤æÊ∫ñÊëòÈÅ∏ÈáçÁ¢ºÈüªÊØç„ÄÇ
    Êé°Áî®1993Âπ¥È¶ôÊ∏ØË™ûË®ÄÂ≠∏Â≠∏ÊúÉÁ≤µË™ûÊãºÈü≥ÊñπÊ°à   https://www.lshk.org/jyutping
    „Äåjyut6ping3„ÄçÈ†ÖÁõÆ‰∏ªÈ†Å https://github.com/rime/rime-cantonese
    „Äåsoengping„ÄçÈ†ÖÁõÆ‰∏ªÈ†Å https://github.com/Over-There-Is/rime-soengping/
    „Äåjyutsp„ÄçÊú¨È†ÖÁõÆ‰∏ªÈ†Å https://github.com/MrCorn0-0/jyutsp
  
  dependencies:
    - jyut6ping3
    - double_pinyin_sg
    - stroke

switches:
  - name: ascii_mode
    reset: 0
    states: [ ‰∏≠Êñá, Ë•øÊñá ]
  - name: full_shape
    states: [ ÂçäËßí, ÂÖ®Ëßí ]
  - options: [ noop, simp_cn, trad_hk, trad_tw ]
#    reset: 0
    states: [ ‰∏çËΩâÊèõ, Â§ßÈôÜÁÆÄ‰Ωì, È¶ôÊ∏ØÁπÅÈ´î, Ëá∫ÁÅ£Ê≠£È´î ]
  - name: ascii_punct
    states: [ „ÄÇÔºå, ÔºéÔºå ]
  - name: emoji_suggestion
    reset: 1
    states: [ "üàöÔ∏èÔ∏è\uFE0E", "üà∂Ô∏èÔ∏è\uFE0F" ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@jyut6ping3
    - affix_segmentor@double_pinyin_sg
    - affix_segmentor@stroke
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
    - script_translator@jyut6ping3
    - script_translator@double_pinyin_sg
    - table_translator@stroke
    - reverse_lookup_translator
  filters:
    - simplifier@simp_cn
    - simplifier@trad_tw
    - simplifier@trad_hk
    - simplifier@emoji_suggestion
    - uniquifier
    - reverse_lookup_filter@reverse_lookup

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba;
  delimiter: " '" 
  algebra:
    # ÂèñÊ∂à‰∏ãÂÖ©Ë°åË®ªÈáãÔºåÊîØÊè¥ÁñëÂΩ±‰∏çÂàÜ
    #- derive/^ng([aeiou])/$1/
    #- derive/^([aeiou])/ng$1/
    # ÂèñÊ∂à‰∏ãË°åË®ªÈáãÔºåÊîØÊè¥ n- ‰ΩµÂÖ• l- ÔºåÂ¶Ç„Äå‰Ω†„ÄçËÆÄËã•„ÄåÁêÜ„Äç
    #- derive/^n/l/
    # ÂèñÊ∂à‰∏ãË°åË®ªÈáãÔºåÊîØÊè¥Áç®Á´ãÈºªÈü≥Èüª ng ‰ΩµÂÖ• mÔºåÂ¶Ç„ÄåÂê≥„ÄçËÆÄËã•„ÄåÂîî„Äç
    #- derive/^ng$/m/
    - xform/([123456])//         # ÂøΩÁï•Â£∞Ë∞É
    - xform/^([aeiouy])/E$1/    #ÈáçË¶ÅÔºåÂØ¶ÁèæËÅ≤ÊØçÂñÆÁç®Ëº∏ÂÖ•ÂäüËÉΩ„ÄÇÈõ∂Â£∞ÊØçËÆæÂÆöÔºåÈùûderive
    - xform/yun$/R/
    - xform/yut$/D;/  # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/^jyu$/YU/
    - xform/yu/Y/
    - xform/^j/Y/
    - derive/^s(?!i)/U$1/    #‰∏çÂÖºÂÆπÈΩêÈΩøÂëº
    - derive/^c/I$1/          #ÂÖºÂÆπÈΩêÈΩøÂëº
    - derive/^z/J$1/          #ÂÖºÂÆπÈΩêÈΩøÂëº
    - xform/^kw/Q/
    - xform/^gw/X/
    - xform/^ku([itk]?$)/Qu$1/
    - derive/^Qu$/KU/
    - xform/^gu([ink]?$)/Xu$1/
    - xform/^ng/R/
    - xform/iu$/Q/
    - xform/eu$/Q/      
    - xform/un$/R/      
    - xform/oeng$/T/      
    - xform/ut$/T/
    - xform/ou$/U/
    - xform/eot/O;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/oet/O;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/ong$/W/
    - xform/ot/W;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/it/I;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/et/I;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/ok$/P/
    - xform/eon/P;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/ung$/S/
    - xform/uk$/D/
    - xform/aap/V;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/aai/V/ 
    - xform/aam$/H/
    - xform/aak/H;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/ak/Q;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/aang$/J;/  # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/aan$/J/
    - xform/aau/N;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/ang/G;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/an$/F/
    - xform/am$/G/
    - xform/ai$/L/
    - xform/aat/C;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/at$/C/
    - xform/au$/B/
    - xform/ap/M;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/aa$/A/ 
    - xform/a$/A;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/ik$/K/
    - xform/oek/K;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/ek/K;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/ing$/;/
    - xform/eng/;;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/ei$/Z/
    - xform/ip/Z;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/ep/Z;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/eoi$/X/
    - xform/ui$/X/    
    - xform/(oe|eo)/T/
    - xform/in$/N/
    - xform/im$/M/
    - xform/em$/M/
    - xform/oi/Y;/    # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/on$/E/      # Â¢ûÂä† ;Ë°®Á§∫Á≤æÈÅ∏
    - xform/(.*)ng$/$1R/
    - xlit/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/
    - derive/^k([s])/q$1/        #ÂÆπÈåØkung #kuk
    - derive/^g([s])/x$1/         #ÂÆπÈåØgung #guk
    - derive/^e([aov])$/$1/          #ÂÆπÈîô‰∏â‰∏™Èõ∂Â£∞ÊØç
    - derive/^([a-z|;]{2});/$1/     #ÈùûÂ∏∏ÈáçË¶Å ÂØ¶ÁèæÁ≤æÈÅ∏
    - xform/^(m|r)$/$1$1/        #mm->[m], rr->[ng].
    # ÂèñÊ∂à‰∏ãË°åË®ªÈáãÔºå‰∏¶ÊõøÊèõ‰∏äË°åË®ªÈáãÔºåÂØ¶ÁèæÊàêÈü≥ÁØÄÁî®Èõ∂ËÅ≤ÊØçÁ∑®Á¢º
    #- xform/^(m|r)$/e$1/
    - abbrev/^([a-z|;]).+$/$1/      # È¶ñÂ≠óÊØçÁ∞°Êãº
    - abbrev/^([a-z|;]{2}).+$/$1/   # È¶ñ2Â≠óÊØçÁ∞°Êãº
    - abbrev/^([a-z|;]{3}).+$/$1/	
    - abbrev/^([a-z|;]{4}).+$/$1/

translator:
  dictionary: jyut6ping3
  prism: jyutsp
  spelling_hints: 8
  strict_spelling: true
  preedit_format:
    - xform/mÔΩç/$1M/
    - xform/(^|[ '])rr/$1NG/
    - xform/(^|[ '])([edtnlghzjcusi])v;/$1$2AAP/    #È†ÜÂ∫èÂ•ΩÈáçË¶ÅÔºåÂÖà;
    - xform/(^|[ '])([bpmfdtnlgkrhxzjcusiyw])v/$1$2AAI/
    - xform/(^|[ '])([nlgkhzjcusiy])t/$1$2OENG/
    - derive/(^|[ '])([egrh])e/$1$2ON/
    - xform/(^|[ '])([bpmdtlghzjcusi]);;/$1$2ENG/
    - xform/(^|[ '])(\w);/$1$2ING/
    - xform/(^|[ '])(r|[pmfdtnlhqxzcsjuiykg])s/$1$2UNG/
    - xform/(^|[ '])yd;/$1YUT/
    - xform/(^|[ '])([dtlgkhzjcusiy])d;/$1$2YUT/
    - xform/(^|[ '])([gk])d/$1$2YUT/
    - xform/(^|[ '])(r|[bpmfdtnlhqxzcsjuiy])d/$1$2UK/
    - xform/(^|[ '])([dtnlgkhzjcusi])r/$1$2YUN/
    - xform/(^|[ '])yr/$1YUN/
    - xform/(^|[ '])([bpmfxw])r/$1$2UN/
    - xform/(^|[ '])([dtnlgkrhzjcusie])y;/$1$2OI/
    - xform/(^|[ '])([dtnlgkrhe])y/$1$2OI/
    - xform/(^|[ '])yu/$1YU/
    - xform/(^|[ '])([zjcusi])y/$1$2YU/
    - xform/(^|[ '])([mlg])a;/$1$2A/
    - xform/(^|[ '])(\w)q;/$1$2AK/
    - xform/(^|[ '])([exrw])q/$1$2AK/
    - xform/(^|[ '])([bpmdtnlgkhzjcusiy])q/$1$2IU/
    - xform/(^|[ '])(\w)m;/$1$2AP/
    - xform/(^|[ '])(\w)g;/$1$2ANG/
    - xform/(^|[ '])([fxqmwp])g/$1$2ANG/
    - xform/(^|[ '])(\w)w;/$1$2OT/
    - xform/(^|[ '])([bpmfdtnlgkrhxqzjcusiw])w/$1$2ONG/
    - xform/(^|[ '])([dlgkzjcusiy])k;/$1$2OEK/
    - xform/(^|[ '])([dtgh])t/$1$2OE/
    - xform/(^|[ '])([dtnlgkhzjcusiy])p;/$1$2EON/
    - xform/(^|[ '])([y])p/$1$2EON/
    - xform/(^|[ '])([dtnlgkhzjcusiy])o;/$1$2EOT/
    - xform/(^|[ '])(\w)i;/$1$2IT/
    - xform/(^|[ '])([bfkrp])i/$1$2IT/
    - xform/(^|[ '])([bpmfqw])t/$1$2UT/
    - xform/(^|[ '])([bpmdtnlgrhzjcusi])u/$1$2OU/
    - xform/(^|[ '])([fxqw])u/$1$2U/
    - xform/(^|[ '])([bpmfdtnlgkrhxqzjcusiw])p/$1$2OK/
    - xform/(^|[ '])(\w)f/$1$2AN/
    - xform/(^|[ '])(\w)g/$1$2AM/
    - xform/(^|[ '])(\w)h;/$1$2AAK/
    - xform/(^|[ '])([bfqyxmpw])h/$1$2AAK/
    - xform/(^|[ '])(\w)h/$1$2AAM/
    - xform/(^|[ '])(\w)j;/$1$2AANG/
    - xform/(^|[ '])([yq])j/$1$2AANG/
    - xform/(^|[ '])(\w)j/$1$2AAN/
    - xform/(^|[ '])(\w)a/$1$2AA/
    - xform/(^|[ '])(\w)k/$1$2IK/
    - xform/(^|[ '])(\w)l/$1$2AI/
    - xform/(^|[ '])(\w)z;/$1$2IP/
    - xform/(^|[ '])([cytzj])z/$1$2IP/
    - xform/(^|[ '])(\w)z/$1$2EI/
    - xform/(^|[ '])([dtnlgkhzjcusiy])x/$1$2EOI/
    - xform/(^|[ '])([bpmfxqw])x/$1$2UI/
    - xform/(^|[ '])(\w)c;/$1$2AAT/
    - xform/(^|[ '])([t])c/$1$2AAT/
    - xform/(^|[ '])(\w)c/$1$2AT/
    - xform/(^|[ '])(\w)b/$1$2AU/
    - xform/(^|[ '])(\w)n;/$1$2AAU/
    - xform/(^|[ '])([er])n/$1$2AAU/
    - xform/(^|[ '])(\w)n/$1$2IN/
    - xform/(^|[ '])([er])m/$1$2AP/
    - xform/(^|[ '])(\w)m/$1$2IM/
    - xform/(^|[ '])i([AEIOUY])/$1CH$2/
    - xform/(^|[ '])i/$1I/
#   - derive/(^|[ '])u/$1OU/
    - xform/(^|[ '])u([AEOUY])/$1SH$2/
    - xform/(^|[ '])u/$1U/
    - xform/(^|[ '])q/$1KW/
    - xform/(^|[ '])x/$1GW/
    - xform/(^|[ '])KWU/$1KU/
    - xform/(^|[ '])GWU/$1GU/
    - xform/(^|[ '])KWu/$1KU/
    - xform/(^|[ '])GWu/$1GU/
    - xform/r/NG/
    - xform/(^|[ '])b/$1B/
    - xform/(^|[ '])c/$1C/
    - xform/(^|[ '])d/$1D/
    - xform/(^|[ '])f/$1F/
    - xform/(^|[ '])g/$1G/
    - xform/(^|[ '])h/$1H/
    - xform/(^|[ '])j/$1J/
    - xform/(^|[ '])k/$1K/
    - xform/(^|[ '])l/$1L/
    - xform/(^|[ '])m/$1M/
    - xform/(^|[ '])n/$1N/
    - xform/(^|[ '])o/$1O/
    - xform/(^|[ '])p/$1P/
    - xform/(^|[ '])s/$1S/
    - xform/(^|[ '])t/$1T/
    - xform/(^|[ '])v/$1V/
    - xform/(^|[ '])w/$1W/
    - xform/(^|[ '])y/$1Y/
    - xform/(^|[ '])z/$1Z/
    - xform/(^|[ '])e(\w+)/$1$2/
    - xform/(^|[ '])e/$1E/
    - xform/(K?)W(I|O)NG/$1WW$2NG/
    - xform/(G)W(AAM|AAU|AM|AU|ENG|IM|IU|OE|OI|U|Y)/$1$2/
    - xform/(K)W(AAM|AAU|AM|AU|E|I|O|U|Y)/$1$2/
    - xform/WW/W/ 
    - xlit/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/


double_pinyin_sg:
  tag: double_pinyin_sg
  dictionary: luna_pinyin
  enable_user_dict: false
  prism: double_pinyin_sg
  prefix: "~"
  suffix: "'"
  tips: „ÄîÈõôÊãº„Äï
  preedit_format:
    - erase/^xx$/
    - xform/^sh/U/
    - xform/^ch/I/
    - xform/^zh/V/
    - derive/^([jqxy])u$/$1v/
    - derive/^([aoe])([ioun])$/$1$1$2/
    - xform/^([aoe])(ng)?$/$1$1$2/
    - xform/(\w)iu$/$1Q/
    - xform/(\w)[iu]a$/$1W/
    - xform/(\w)[uv]an$/$1R/
    - xform/(\w)[uv]e$/$1T/
    - xform/(\w)uai$/$1Y/
    - xform/(\w)ing$/$1;/
    - xform/(\w)uo$/$1O/
    - xform/(\w)[uv]n$/P/
    - xform/(\w)i?ong$/$1S/
    - xform/(\w)[iu]ang$/D/
    - xform/(?!e)en$/$1F/
    - xform/(?!e)eng$/$1G/
    - xform/(?!a)ang$/$1H/
    - xform/(\w)ian$/M/
    - xform/(?!a)an$/$1J/
    - xform/(\w)iao$/$1C/
    - xform/(?!a)ao$/$1K/
    - xform/(?!a)ai$/$1L/
    - xform/(?!e)ei$/$1Z/
    - xform/(\w)ie$/$1X/
    - xform/(\w)ui$/$1V/
    - xform/(?!o)ou$/$1B/
    - xform/(\w)in$/$1N/
    - xlit/QWRTYUIOPSDFGHMJCKLZXVBN/qwrtyuiopsdfghmjcklzxvbn/
    
jyut6ping3:
  tag: jyut6ping3
  dictionary: jyut6ping3
  prefix: "Q:"
  suffix: ;
  preedit_format:
    - xform/([aeioumngptk])vv/$1‚Å¥/
    - xform/([aeioumngptk])xx/$1‚Åµ/
    - xform/([aeioumngptk])qq/$1‚Å∂/
    - xform/([aeioumngptk])v/$1¬π/
    - xform/([aeioumngptk])x/$1¬≤/
    - xform/([aeioumngptk])q/$1¬≥/
  tips: „ÄîÁ≤§Êãº„Äï
  closing_tips: „ÄîÁ≤µË™ûÈõôÊãº„Äï

stroke:
  tag: stroke
  dictionary: stroke
  enable_user_dict: false
  prefix: "X:"
  suffix: ";"
  tips: „ÄîÁ≠ÜÁï´„Äï
  preedit_format:
    - xlit/hspnz/‰∏Ä‰∏®‰∏ø‰∏∂‰πô/
    
reverse_lookup:
  tags: [double_pinyin_sg, jyut6ping3, stroke]
  dictionary: jyut6ping3
  prism: double_pinyin_sg
  enable_completion: true
  prefix: "`"
  suffix: "'"
  tips: „ÄîÂèçÊü•„Äï
  overwrite_comment: false
  comment_format: 
simp_cn:
  option_name: simp_cn
  opencc_config: t2s.json    
  
trad_tw:
  option_name: trad_tw
  opencc_config: t2tw.json

trad_hk:
  option_name: trad_hk
  opencc_config: t2hk.json
  
emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: all

punctuator:
  import_preset: default

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    punct: "^/([0-9]0?|[a-z]+)$"
    double_pinyin_sg: "~[a-z|;]*'?$"
#    reverse_lookup: "`[a-z|;]*'?$"
    jyut6ping3: "Q:[a-z|;]*'?$"
    stroke: "X:[hspnz]*'?$"